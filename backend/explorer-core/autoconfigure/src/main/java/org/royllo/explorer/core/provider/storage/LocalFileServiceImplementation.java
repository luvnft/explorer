package org.royllo.explorer.core.provider.storage;

import com.google.common.jimfs.Configuration;
import com.google.common.jimfs.Jimfs;
import io.undertow.Undertow;
import io.undertow.server.handlers.resource.PathResourceManager;
import io.undertow.server.handlers.resource.ResourceHandler;
import jakarta.annotation.PreDestroy;
import lombok.NonNull;
import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.binary.Hex;
import org.royllo.explorer.core.util.base.BaseProvider;
import org.springframework.context.annotation.Profile;
import org.springframework.core.io.ClassPathResource;
import org.springframework.stereotype.Service;

import javax.xml.bind.DatatypeConverter;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.nio.file.FileSystem;
import java.nio.file.Files;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

import static org.royllo.explorer.core.dto.proof.ProofDTO.PROOF_FILE_NAME_EXTENSION;

/**
 * Content service - Local file implementation - Used for local development.
 * It also includes a web server to serve content and simulate a S3 CDN.
 */
@SuppressWarnings("SpellCheckingInspection")
@Service
@Profile("!s3-storage")
public class LocalFileServiceImplementation extends BaseProvider implements ContentService {

    /** Web server port. */
    public static final int WEB_SERVER_PORT = 9093;

    /** Web server host. */
    public static final String WEB_SERVER_HOST = "localhost";

    /** In-memory File system. */
    private final FileSystem fileSystem;

    /** Web server. */
    private final Undertow webServer;

    /**
     * Constructor.
     */
    public LocalFileServiceImplementation() throws DecoderException, IOException {
        // Starting an in-memory file system.
        fileSystem = Jimfs.newFileSystem(Configuration.unix());

        // =============================================================================================================
        // For our tests, we create the asset data for RoylloCoin.
        storeFile("roylloCoin on mainnet by Royllo".getBytes(), "24a27ab522c9c33e64f4462f2acee01571e014ccbbac075786d1deae033a128d.txt");

        // =============================================================================================================
        // For roylloNFT, we will store an image instead of the text we set.
        final String image = "89504e470d0a1a0a0000000d4948445200000018000000180806000000e0773df80000006e4944415478da63601805a360d880ff38304d0da78a25ff89c4941b5e682f8b81a9660136c3d12ca1cc029b0c75304636182646ae0528ae07d11ef9da182e078951c5025a04d1c059802e36b47c704451008e29cd07ff89f105552dc011f6d4f50135cb229c41448b229ba25403006cf5f5c3b61b973a0000000049454e44ae426082";
        storeFile(Hex.decodeHex(image), "89c9d3ff7cb9dbc4615f854f7127e94db10edd430f8bcf82d7309d0c8b750051.png");

        // =============================================================================================================
        // Storing proofs for all assets.
        final String roylloCoinProof = "544150460000000001fd054e544150500004000000000224cb9f6b6266ba56d7bf85fbf3963c59caadb80045c1202c2a267c65dea2e92dd20000000404500060da25a5c4ac850d9b2bb53264a39577ad4b37b5b6e356adb502000000000000000000a82669d71121cb48e9687c782551e0063c0552f8e9bf499d5b6100b8df1575284d365265125a041746cca20f06f702000000000101cb9f6b6266ba56d7bf85fbf3963c59caadb80045c1202c2a267c65dea2e92dd20400000000ffffffff02e8030000000000002251200e7b1c167645f8fea7d7d52d9fd2655822d53e9f56e7ce5261635955d18906f1542e040000000000225120350e820feb4e9ae48a0f6281f7aebc64434132302cd204f71bb0d53f5e8fdf600248304502210094efb25003c9ced0c59a50c486f34351f23fcf72d5994b788e21be14e0d7e91f02203b1101052c06ca423891bcef245857e0073137a4d9eb62fcc0cde6c28a5becfc012103a23aa11f7f890650feaf48f09006d9c3e800f37b5b48c47dcfef27e7554cd5900000000008fd01830c6a7ccb693cd1d079239846914c0f6321988a3ab9efe6265191669bcb74c487f005e70b97110aa74310d5758156a887b8a1cfe6034ed8d2b4afba0ef89d3d0c1bb18c04cfe7fbc25a72fc5f9298c19f8e2d0ee5a127c5244f66a6edbc29df1c3764deda4f5dbcf2aad84cece706a48d1ead1aff3c3a54cf651c5803c710e697208b453cf2d5d65fb39948b24709616e6ce502ba78c72dc48f732608ec17af1109980f804c959933be7c02b6b1491a40a9182cf1b5f9b7bb3a8b5eeffad7dcc72bbc3c649ec93c31c5b0acff3a4275edf9e95046a9911276ec256ff3410bdfc513aeab02ad7ab1d0bda062fb9ff3828a367139363265ac7b96076018dcddc4c64f2ae2be52f40637b6c75d7d1b8d62316aabd2948da02e5e61988615faa014c78b1defa9f97f3897ae8d0f27a0ef87f87af2f153f15f27ba3dd35a65dc4743b7570bf824800d0451c3d7b7f0619176a6b13655380a272c06925ecf77508e70e578c6fb76a872f68b0832f60b124b9aedcee1596bc5692b1cf02c7fcd60dfd0bca5cf0b0af50001000254cb9f6b6266ba56d7bf85fbf3963c59caadb80045c1202c2a267c65dea2e92dd2000000040a726f796c6c6f436f696ee08c74d75554e2c9d6d8452a3584d191f8727963b05e497bba84ada8ae82920800000000000401000605fe000186a00b690167016500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e020000102102fe0898805795bd2b698c8819ea3bfcbf1c7aa2330d0f7228723899b825848ee60c9f00040000000002210215305a361d0919c3be1a756ec45514feff098ddeb5b2731c4bf8068e19a69de903740149000100022024a27ab522c9c33e64f4462f2acee01571e014ccbbac075786d1deae033a128d04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e00040000000102210238636cf0d229ba3c9c46e2d832db0f41a827de003ff5a16edc0611e1b71806f105030401011124000100021f726f796c6c6f436f696e206f6e206d61696e6e657420627920526f796c6c6f1604000c75e21754cb9f6b6266ba56d7bf85fbf3963c59caadb80045c1202c2a267c65dea2e92dd2000000040a726f796c6c6f436f696ee08c74d75554e2c9d6d8452a3584d191f8727963b05e497bba84ada8ae82920800000000004ef51f2a52c89668c2bb425dbe7c89d7f6dc9f1869635a80a2e13bf4d3d085e9";
        storeFile(roylloCoinProof.getBytes(), sha256(roylloCoinProof) + PROOF_FILE_NAME_EXTENSION);

        final String setOfRoylloNFT1 = "544150460000000001fd055a544150500004000000000224900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010450008004326ab5c17f2ded3596b047247d63f70a33f70446c9096dc4982000000000000000ef61438cd2c2405693b046c63c514df4a47f5db553b5e20cc48c86d1b41c4d6c6a3032655f293b194efac01206cd02000000000101900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d0100000000ffffffff02e803000000000000225120d6484a40e7a0c5bcb5a958bd6251554feee22c1c94b0c058d7891105b34f309b0ba7100000000000225120c746196e62f7e88c99a96fab48967d38c58dcd415ccc87a51b5bd96fcf34de840140ae44a092025c5c182a52f0b542489395196b147b6b908f220205a562b86de46a2fd83770100e8aa5f775496c518ec3be8846fcc727cc3467adc8eb149cc767790000000008e207e17618af6be825a96957491f4b6499cf97fdc5b88a4762e87661426d41bb62081d6bf0ab625ac447d9c83a1fed040b2876c076da593609509112a69372a5ed0082dad8dcaa7ce94e0a4ea0f520807995d5202c0f2415ea8756db7c4ca9cb3768ee2c9043dcf1ba953d3adb1f6901d29ce77ba52a5f3e5072fd114053cb477a872a280c347835730f15997e1ecfe5e76d7b43390f8fe665065353b9bce131a26a4847319d092430d0f6878224be35e03af5bbc81d337a305e2c8590dea0b7cccbec17ab742568cc65f574f89c49119e0881650fee43d1472232c5486688b0d9073e0afd015c0001000258900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010e7365744f66526f796c6c6f4e46545d24eb6c3942d4919bdf6aa059ccd193afcbace8cfaf3cf9138ad43cafadc38e00000000010401010601010bad01ab0165000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003420140b21995d3080a44a6402faddc4c8976e50c72230a811754f9f2656072cc1d95bfb15fa1e937ad6381ecfb3bcd821ffef583aeb90b08b8e47d5dc51e2c932a7b510e0200001021022dd926192ebdfd038b85ae326efd0ee3919c435da9e1d43186f994706cf245081121039511fd8c1f51acfbd85d9d742268d1ca03ce3b69d0436e71130192c085394c990cef000400000000022102cb0cb321ba20816b7450ae6eb309839770f3dc41529664124f8983ca11a6932b03c4019900010002202d3e0b53fa0b0ca74339398b9d3efca5d338fc6fc3727c4a24b4ec3191215e3a04720002e9c90ee43476c7623bd5392f7197c8ac6a7f1eabb535264e515e82dbdc16d1b800000000000000017e079338ba0a60e64b794492e39e4a10ce06083578677aa95b6c6c9a373cc6dc0000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6f022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e000400000001022102f202542e41672bec22302c29d8e002c953c9c9abb1c4f8cdeefd1e075753e3060503040101111d00010002187365744f66526f796c6c6f4e465420627920526f796c6c6f16040026abaf1758900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010e7365744f66526f796c6c6f4e46545d24eb6c3942d4919bdf6aa059ccd193afcbace8cfaf3cf9138ad43cafadc38e0000000001192102575af07788bda54cc640cfb9b05ad0a621c171e8c581e12e4cbdf3d2d7b8da8241765d6ecc379d1595d8af0fff01fab52a0675e56d4e8dfa4cf197884739d20a";
        storeFile(setOfRoylloNFT1.getBytes(), sha256(setOfRoylloNFT1) + PROOF_FILE_NAME_EXTENSION);
        final String setOfRoylloNFT2 = "544150460000000001fd053a544150500004000000000224900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010450008004326ab5c17f2ded3596b047247d63f70a33f70446c9096dc4982000000000000000ef61438cd2c2405693b046c63c514df4a47f5db553b5e20cc48c86d1b41c4d6c6a3032655f293b194efac01206cd02000000000101900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d0100000000ffffffff02e803000000000000225120d6484a40e7a0c5bcb5a958bd6251554feee22c1c94b0c058d7891105b34f309b0ba7100000000000225120c746196e62f7e88c99a96fab48967d38c58dcd415ccc87a51b5bd96fcf34de840140ae44a092025c5c182a52f0b542489395196b147b6b908f220205a562b86de46a2fd83770100e8aa5f775496c518ec3be8846fcc727cc3467adc8eb149cc767790000000008e207e17618af6be825a96957491f4b6499cf97fdc5b88a4762e87661426d41bb62081d6bf0ab625ac447d9c83a1fed040b2876c076da593609509112a69372a5ed0082dad8dcaa7ce94e0a4ea0f520807995d5202c0f2415ea8756db7c4ca9cb3768ee2c9043dcf1ba953d3adb1f6901d29ce77ba52a5f3e5072fd114053cb477a872a280c347835730f15997e1ecfe5e76d7b43390f8fe665065353b9bce131a26a4847319d092430d0f6878224be35e03af5bbc81d337a305e2c8590dea0b7cccbec17ab742568cc65f574f89c49119e0881650fee43d1472232c5486688b0d9073e0afd015d0001000259900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010f7365744f66526f796c6c6f4e465432512dfac35a94760baf3dbd6682e3cd0d5cf4f3f8cc5b881931f73ed3a820c2a400000000010401010601010bad01ab01650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000034201409a8b780e6e9fc9cb85424fdbdb0c86563ab4229007a572109baf7e4ef78419ed7fdeb8801a6e8811e70a64ab09376fbcb5e04cda5cc8a286b3bd679859bc02670e02000010210217c46686156f732035981526ea4f7e4cf5055fbdb6eeaa0254ea2b111b69328e1121039511fd8c1f51acfbd85d9d742268d1ca03ce3b69d0436e71130192c085394c990cef000400000000022102cb0cb321ba20816b7450ae6eb309839770f3dc41529664124f8983ca11a6932b03c4019900010002202d3e0b53fa0b0ca74339398b9d3efca5d338fc6fc3727c4a24b4ec3191215e3a04720002b3cd0b6af8976c1d9979ac0b63f85965e1cca16e9686b2406dfb063daf54140c00000000000000017e079338ba0a60e64b794492e39e4a10ce06083578677aa95b6c6c9a373cc6dc0000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6f022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e000400000001022102f202542e41672bec22302c29d8e002c953c9c9abb1c4f8cdeefd1e075753e3060503040101111e00010002197365744f66526f796c6c6f4e46543220627920526f796c6c6f16040026abaf1759900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010f7365744f66526f796c6c6f4e465432512dfac35a94760baf3dbd6682e3cd0d5cf4f3f8cc5b881931f73ed3a820c2a40000000001cd5aec6f7e1b80b906b4dcc157252585e1237fbc39e4635514fbbfe7992c10da";
        storeFile(setOfRoylloNFT2.getBytes(), sha256(setOfRoylloNFT2) + PROOF_FILE_NAME_EXTENSION);
        final String setOfRoylloNFT3 = "544150460000000001fd0512544150500004000000000224900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010450008004326ab5c17f2ded3596b047247d63f70a33f70446c9096dc4982000000000000000ef61438cd2c2405693b046c63c514df4a47f5db553b5e20cc48c86d1b41c4d6c6a3032655f293b194efac01206cd02000000000101900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d0100000000ffffffff02e803000000000000225120d6484a40e7a0c5bcb5a958bd6251554feee22c1c94b0c058d7891105b34f309b0ba7100000000000225120c746196e62f7e88c99a96fab48967d38c58dcd415ccc87a51b5bd96fcf34de840140ae44a092025c5c182a52f0b542489395196b147b6b908f220205a562b86de46a2fd83770100e8aa5f775496c518ec3be8846fcc727cc3467adc8eb149cc767790000000008e207e17618af6be825a96957491f4b6499cf97fdc5b88a4762e87661426d41bb62081d6bf0ab625ac447d9c83a1fed040b2876c076da593609509112a69372a5ed0082dad8dcaa7ce94e0a4ea0f520807995d5202c0f2415ea8756db7c4ca9cb3768ee2c9043dcf1ba953d3adb1f6901d29ce77ba52a5f3e5072fd114053cb477a872a280c347835730f15997e1ecfe5e76d7b43390f8fe665065353b9bce131a26a4847319d092430d0f6878224be35e03af5bbc81d337a305e2c8590dea0b7cccbec17ab742568cc65f574f89c49119e0881650fee43d1472232c5486688b0d9073e0afd015d0001000259900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010f7365744f66526f796c6c6f4e46543357321df398180b331e6a8207abe9412a19e5b5c307348340fac9d450b5310cec00000000010401010601010bad01ab0165000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003420140687db6a3598f2a507e8cda8ce94769de9446641c923fc69418796675cdb4a75ba1e8956812d2f81c33a7e4ef5f5c43e855683d9a7239fc281cb6d10a3058e4710e020000102102c8c3e030404c7f117a62aeebca5926a1693f917121465938cc5f215a8a3dc7e11121039511fd8c1f51acfbd85d9d742268d1ca03ce3b69d0436e71130192c085394c990cc7000400000000022102cb0cb321ba20816b7450ae6eb309839770f3dc41529664124f8983ca11a6932b039c017100010002202d3e0b53fa0b0ca74339398b9d3efca5d338fc6fc3727c4a24b4ec3191215e3a044a00012225bf1097c66530e2c0b7d13acee653ff40ca5ab078d2feb12a14a1dd825fd10000000000000002ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e000400000001022102f202542e41672bec22302c29d8e002c953c9c9abb1c4f8cdeefd1e075753e3060503040101111e00010002197365744f66526f796c6c6f4e46543320627920526f796c6c6f16040026abaf1759900b77ad5955e1640645a7c66f1a794acb3a0f69ed4c04b4bf65baf25a9fb76d000000010f7365744f66526f796c6c6f4e46543357321df398180b331e6a8207abe9412a19e5b5c307348340fac9d450b5310cec0000000001b805a6524902d9682bcbcfb45d1473eb35d85fd1f016e80b3227eaa33b3eb678";
        storeFile(setOfRoylloNFT3.getBytes(), sha256(setOfRoylloNFT3) + PROOF_FILE_NAME_EXTENSION);

        final String trickyRoylloCoinProof1 = "544150460000000001fd04d154415050000400000000022476dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e3772700000001045000003635f365e8a493496b66b914c5725753fad8439edf0a567a90220a00000000000000eaf04296428e6aaec3fffbc67a0598e067a050839e6efb23ff9330c077da7426463432655f293b19663892b606f60200000000010176dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270100000000ffffffff02e8030000000000002251204251129e0033628da2e8e297ea72bd6675143a881841a655f92b93462d8f3898ebbf16000000000022512075a5d9344ea3b0fb74a7c42b14e066249a9ff3abfb515e6288abe5502f2585740247304402206bf51adf6f12b6f50e344d51bffaa5b5e94e6cf0834523920352354a84c4836a0220177509e5a4c424852779d8ebf44441e4ec3f80ea365ec185c37d5e453106ab94012103219e2594f427e338690c3f51409706439d8ab83fde02d18d0c28ec55c285801c0000000008fd0102087952442c0461122a7532be0147f2a7fe87dcb387b133d2a32ce95638ea1ed345859091c4ae7a576de03631f91e8efd9595d2b54a3d8f21013374e1a857feb25a4eb246b5ba1a90c4937053b66e48b2908118daa11f8c53584723e612b7d409e56c09b4657be394ecd13208ee6bd102930fdc1655864bceab592900527297ec9c56012066ab30eefec6ad51d148bdbbb6d5a23813750904986d7b59fcc26ff1ebb2054959f173eccab36e4e91e8794956ca29758f4dfdc4756f3989a1f1976e8736076bb032659a09852f845ee476260daa53b9d71b246b4606f75c4af4118ed9f6dc4ca0876a83cb9fe99f16ba9a7f2f6c37c4736106cad9f78ae06fb56ccd45a20af9000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000000401000603fd2af80b690167016500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0200001021023a8d9bc352eb3f5f69b798a941f06244b3633a8fd2cf82406132504ff08e23ff0c9f000400000000022103995581f54bd5751c79fa0f394f97fc05b88180bacc67805ff11065e6c6c60c40037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e0004000000010221029fa69a708d80239eb132267e3d7f90b4312fdada68c3ebcb402eabf6628ef0a50503040101111f000100021a747269636b79526f796c6c6f436f696e20627920526f796c6c6f16040026abb0175a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000008b27a67fc41942150b23743e9b88aeedfb8da174f90f9e21667eb455ac099dfa";
        storeFile(trickyRoylloCoinProof1.getBytes(), sha256(trickyRoylloCoinProof1) + PROOF_FILE_NAME_EXTENSION);
        final String trickyRoylloCoinProof2 = "544150460000000002fd04d154415050000400000000022476dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e3772700000001045000003635f365e8a493496b66b914c5725753fad8439edf0a567a90220a00000000000000eaf04296428e6aaec3fffbc67a0598e067a050839e6efb23ff9330c077da7426463432655f293b19663892b606f60200000000010176dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270100000000ffffffff02e8030000000000002251204251129e0033628da2e8e297ea72bd6675143a881841a655f92b93462d8f3898ebbf16000000000022512075a5d9344ea3b0fb74a7c42b14e066249a9ff3abfb515e6288abe5502f2585740247304402206bf51adf6f12b6f50e344d51bffaa5b5e94e6cf0834523920352354a84c4836a0220177509e5a4c424852779d8ebf44441e4ec3f80ea365ec185c37d5e453106ab94012103219e2594f427e338690c3f51409706439d8ab83fde02d18d0c28ec55c285801c0000000008fd0102087952442c0461122a7532be0147f2a7fe87dcb387b133d2a32ce95638ea1ed345859091c4ae7a576de03631f91e8efd9595d2b54a3d8f21013374e1a857feb25a4eb246b5ba1a90c4937053b66e48b2908118daa11f8c53584723e612b7d409e56c09b4657be394ecd13208ee6bd102930fdc1655864bceab592900527297ec9c56012066ab30eefec6ad51d148bdbbb6d5a23813750904986d7b59fcc26ff1ebb2054959f173eccab36e4e91e8794956ca29758f4dfdc4756f3989a1f1976e8736076bb032659a09852f845ee476260daa53b9d71b246b4606f75c4af4118ed9f6dc4ca0876a83cb9fe99f16ba9a7f2f6c37c4736106cad9f78ae06fb56ccd45a20af9000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000000401000603fd2af80b690167016500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0200001021023a8d9bc352eb3f5f69b798a941f06244b3633a8fd2cf82406132504ff08e23ff0c9f000400000000022103995581f54bd5751c79fa0f394f97fc05b88180bacc67805ff11065e6c6c60c40037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e0004000000010221029fa69a708d80239eb132267e3d7f90b4312fdada68c3ebcb402eabf6628ef0a50503040101111f000100021a747269636b79526f796c6c6f436f696e20627920526f796c6c6f16040026abb0175a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000008b27a67fc41942150b23743e9b88aeedfb8da174f90f9e21667eb455ac099dfafd07a7544150500004000000000224adb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d630000000004500000ff3f5dba5695789b34b2a4177c1918ff0aa9d20eef1bdfe78e302100000000000000ad2ec309a6f38f5bd7432d3ec39375dfcce23987a05de649086d09e43ee4ca1bd03732655f293b19e08c9a3e06fd016302000000000102adb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d630100000000ffffffffadb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d6300000000000000000003e803000000000000225120eb93573ac51bf6b65aa4458b0bc48659844f2fd267108c740d130bfe9ac41807e803000000000000225120e8e257c55806d5091802e9c92c8264153a1778c3d7814c12854f14079cc6c98a11b416000000000022512051df07dfb09c998ea6f0cc7945a689fe542fc1a9e317a03ab2dfe06b5b453b8b014096ae7d9091209d38139dd1f3243e091bc7d94ae3be3a0a3a952db82e67090cc7605ca344d4e6bf564a98a75e3ee4ba3b42f0d3f7c5db92cade10092281c87ec90140466ae8ba099587195807ec28a3fe682c39355438892027575b0261bbdcc486ddd9af10749be0617563be9ab16e31be8519aa565e0eb77a9b2cc1596034e2ee1c0000000008c20608c03588c3edf8639df01c70cbd3793dfe478af2f1f88de37cef016ca1f60b32ae4690a36a3c5e86121b1db67c5d6e560ec617f092fd329c32a96cfdc1a988182f466628113babb675f06190883f3ee8bfb2ed82efe90be0bd1413fa1c7b2507dad2b9a035ded2db5e0db7855ad26fcbf2dfeaa691df17cd1835ec6de8cf7795a63b81caa53ac29ad16e7088bbf8857d9a2ff40548b9de836c5bbe85ce22b3668293682aed4a1ed48936e1b92a79f7c1e459e699ebeb790831fe7e8108a48ada2e0afd02b4000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000000401000601320bfd022401fd02200165000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005fd01b54a000133bb0d9d198714f699adcaaeba0da20feb35bb9c6cc7f954466ac980f39b2f650000000000002ac6ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdffd0167000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000000401000603fd2ac60bad01ab0165adb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d6300000000e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e023a8d9bc352eb3f5f69b798a941f06244b3633a8fd2cf82406132504ff08e23ff03420140098e4ab4d1370e834542ac40fe2ef80d48f9b5bc4c484375342928e1fb07cdc8f5e49a077ddcee12dd92f2b3c57a06dad10c33f19512db42662d3d8b9016fd5a0d280ec4c71b4a0c96a3939c488fe60a268a8777e3016b1f41306ecf572a0540bdd70000000000002af80e0200001021022dcc33d4e29c5d322277b9404ced5c67790fe1e31e234fecb3d06239caf3eddb0e0200001021026e6f1ce5a4cf58f63f1c6d2421aaf3d011e3811bab92122cffd67dada97ab6100c9f000400000001022102db2decc6a7e06ab173ffce3fabd24de90d607a7d8a8a7ed2f95c51f7afca5aad037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0df802c7000400000000022102ca2940ca5e20318ee913dfb1bd22c9e61065bead2137909b849dc1625b9854b8039c01710001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e044a0001ad91c6726cfc6a35637fc28d8c6c5153ca6667faca459054a03195cf87cb014a0000000000002ac6ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbf022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2e0004000000020221028cca992c798b0e2f92ff69366196625005376721aeee5fb9ce6c766d90e1840205030401010f9f000400000000022102ca2940ca5e20318ee913dfb1bd22c9e61065bead2137909b849dc1625b9854b8037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff16040026abb20730ebfb00979ea9778521856c717b764370eaf504d79dc3aea33e1caa970d25";
        storeFile(trickyRoylloCoinProof2.getBytes(), sha256(trickyRoylloCoinProof2) + PROOF_FILE_NAME_EXTENSION);
        final String trickyRoylloCoinProof3 = "544150460000000003fd04d154415050000400000000022476dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e3772700000001045000003635f365e8a493496b66b914c5725753fad8439edf0a567a90220a00000000000000eaf04296428e6aaec3fffbc67a0598e067a050839e6efb23ff9330c077da7426463432655f293b19663892b606f60200000000010176dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270100000000ffffffff02e8030000000000002251204251129e0033628da2e8e297ea72bd6675143a881841a655f92b93462d8f3898ebbf16000000000022512075a5d9344ea3b0fb74a7c42b14e066249a9ff3abfb515e6288abe5502f2585740247304402206bf51adf6f12b6f50e344d51bffaa5b5e94e6cf0834523920352354a84c4836a0220177509e5a4c424852779d8ebf44441e4ec3f80ea365ec185c37d5e453106ab94012103219e2594f427e338690c3f51409706439d8ab83fde02d18d0c28ec55c285801c0000000008fd0102087952442c0461122a7532be0147f2a7fe87dcb387b133d2a32ce95638ea1ed345859091c4ae7a576de03631f91e8efd9595d2b54a3d8f21013374e1a857feb25a4eb246b5ba1a90c4937053b66e48b2908118daa11f8c53584723e612b7d409e56c09b4657be394ecd13208ee6bd102930fdc1655864bceab592900527297ec9c56012066ab30eefec6ad51d148bdbbb6d5a23813750904986d7b59fcc26ff1ebb2054959f173eccab36e4e91e8794956ca29758f4dfdc4756f3989a1f1976e8736076bb032659a09852f845ee476260daa53b9d71b246b4606f75c4af4118ed9f6dc4ca0876a83cb9fe99f16ba9a7f2f6c37c4736106cad9f78ae06fb56ccd45a20af9000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000000401000603fd2af80b690167016500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0200001021023a8d9bc352eb3f5f69b798a941f06244b3633a8fd2cf82406132504ff08e23ff0c9f000400000000022103995581f54bd5751c79fa0f394f97fc05b88180bacc67805ff11065e6c6c60c40037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e0004000000010221029fa69a708d80239eb132267e3d7f90b4312fdada68c3ebcb402eabf6628ef0a50503040101111f000100021a747269636b79526f796c6c6f436f696e20627920526f796c6c6f16040026abb0175a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000008b27a67fc41942150b23743e9b88aeedfb8da174f90f9e21667eb455ac099dfafd05b9544150500004000000000224adb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d630000000004500000ff3f5dba5695789b34b2a4177c1918ff0aa9d20eef1bdfe78e302100000000000000ad2ec309a6f38f5bd7432d3ec39375dfcce23987a05de649086d09e43ee4ca1bd03732655f293b19e08c9a3e06fd016302000000000102adb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d630100000000ffffffffadb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d6300000000000000000003e803000000000000225120eb93573ac51bf6b65aa4458b0bc48659844f2fd267108c740d130bfe9ac41807e803000000000000225120e8e257c55806d5091802e9c92c8264153a1778c3d7814c12854f14079cc6c98a11b416000000000022512051df07dfb09c998ea6f0cc7945a689fe542fc1a9e317a03ab2dfe06b5b453b8b014096ae7d9091209d38139dd1f3243e091bc7d94ae3be3a0a3a952db82e67090cc7605ca344d4e6bf564a98a75e3ee4ba3b42f0d3f7c5db92cade10092281c87ec90140466ae8ba099587195807ec28a3fe682c39355438892027575b0261bbdcc486ddd9af10749be0617563be9ab16e31be8519aa565e0eb77a9b2cc1596034e2ee1c0000000008c20608c03588c3edf8639df01c70cbd3793dfe478af2f1f88de37cef016ca1f60b32ae4690a36a3c5e86121b1db67c5d6e560ec617f092fd329c32a96cfdc1a988182f466628113babb675f06190883f3ee8bfb2ed82efe90be0bd1413fa1c7b2507dad2b9a035ded2db5e0db7855ad26fcbf2dfeaa691df17cd1835ec6de8cf7795a63b81caa53ac29ad16e7088bbf8857d9a2ff40548b9de836c5bbe85ce22b3668293682aed4a1ed48936e1b92a79f7c1e459e699ebeb790831fe7e8108a48ada2e0afd0167000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000000401000603fd2ac60bad01ab0165adb03787405b61fb3ea37a6f97d7867751e5dc68e21837aa30f2ff35390c2d6300000000e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e023a8d9bc352eb3f5f69b798a941f06244b3633a8fd2cf82406132504ff08e23ff03420140098e4ab4d1370e834542ac40fe2ef80d48f9b5bc4c484375342928e1fb07cdc8f5e49a077ddcee12dd92f2b3c57a06dad10c33f19512db42662d3d8b9016fd5a0d280ec4c71b4a0c96a3939c488fe60a268a8777e3016b1f41306ecf572a0540bdd70000000000002af80e0200001021022dcc33d4e29c5d322277b9404ced5c67790fe1e31e234fecb3d06239caf3eddb0c9f000400000000022102ca2940ca5e20318ee913dfb1bd22c9e61065bead2137909b849dc1625b9854b8037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0df802c7000400000001022102db2decc6a7e06ab173ffce3fabd24de90d607a7d8a8a7ed2f95c51f7afca5aad039c01710001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e044a00019b28bc20e99078e38640e026115c0e6b214bba541ad194dffa5737983cddae1a0000000000000032ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbf022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2e0004000000020221028cca992c798b0e2f92ff69366196625005376721aeee5fb9ce6c766d90e18402050304010116040026abb28f40a7bea7a33a37cd2194c330007dcbc532537b9ce5c77e357afae1ab30f799fd07c7544150500004000000000224d3e09cd4a81a19f2857c4afcf033bf1d2f4cb8b1ae5bad3b68a7825823f1acf200000000045000400020ed570e7c46d5584f76068799496d9317a4398e486a785ab4110000000000000087cfc858c94d3005d6c8880fafd773aed06e2fe748a081a2fc32d9e2f20ef5a3384032655f293b19668bd3c706fd016302000000000102d3e09cd4a81a19f2857c4afcf033bf1d2f4cb8b1ae5bad3b68a7825823f1acf20200000000ffffffffd3e09cd4a81a19f2857c4afcf033bf1d2f4cb8b1ae5bad3b68a7825823f1acf200000000000000000003e803000000000000225120acb9b163799c60c08c279c18a652ffe4bbbea9301831c3acca52b796a5fb7cc5e8030000000000002251203f475770dfc8d7e92e93632c251a5c01b6e90670e8522b81cb7b448bf86efffa03aa1600000000002251209706916002ac9ba36bab02ce2ed586da3ee2bfd271c54743143c9663ccfda56d01409867a537b52ee5c4bc798315397d89bf65380e4ed88a04ec9315f67bc08ed6bb275a51117feecf87da27a8b2761630c92fd81c6e4512ecfe9536819be6b3c5d00140a6df68be0be4f5c58b40e0463254e11e6848761ad77d538f53212ad78b5ab80640344e46de7bcd6d8350bf52769851a5b0abff9e8c08414075ea885ad86644ac0000000008e207ed5bc2ffc43424ee07fed779bdbbb19b8a264d6b3c7e4be7e48e1fc63196abe8e749d4950360f70c69103d539ae7a27a80ca78c226fd540b4fc84d687b71eb786b8fc0cc51efe9a546188902577e1f5d105dbe483b03077fd6ac643ef2dfd0a152a98a2916ce8948567b361ed53da743e455e575cef6380c1909aeeb597c377c476ce23a33c62d040495d94028ba3c503aa8d56ed27a3e323c2503277d03fddf89361e8d266148f7784cdadbcd47b21d8221418ec9b4b5f5ffad95a9e41159ca7be8c3138e935252798546897d2515404231693240af2dc052479c1403f9ef11640afd02b4000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b41000000000004010006017d0bfd022401fd02200165000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005fd01b54a0001c6360d41bd3cb4ddefc119acc1db551dd2a324c0364c3a6f42c8183e0ffe6cf50000000000002a49ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdffd0167000100025a76dfd989aeba79f86c08003815ef131e2e4186827bb1f431526d1f4506e377270000000110747269636b79526f796c6c6f436f696e13a16f12767ad6fbafcfd69fd12fc19747ac35749b1b6806c74dd4a07d2e4b4100000000000401000603fd2a490bad01ab0165d3e09cd4a81a19f2857c4afcf033bf1d2f4cb8b1ae5bad3b68a7825823f1acf200000000e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e022dcc33d4e29c5d322277b9404ced5c67790fe1e31e234fecb3d06239caf3eddb034201408bd6b5306b3c03794c974922b7b6a4a5b9deeefd35a02d3ade39de88882e507cc9b62c8de4c4a6758efa9b756428e0d7666657794d1a8bd82cdbd6d02117139a0d2851efabb48146e9c53975cb2f0f71fdcc7c17b0a14d1787de7ad8dc8ac4d3c7a20000000000002ac60e02000010210223e1cfbdb232a9d98d3ddc2bf36d907c3c1bf3f40ad10eca0ebdb7eafe07db840e020000102102629f225f4ef29972e703b1086796dbe47e881ae913904a1c2eec15df35361fb60c9f0004000000010221034d6fd392fe86bdfc93973406f15050b36281f569be8335afa4b3586b36a0aaf8037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0df802c7000400000000022102bfca44f6bdfd7d54ce75e775049026015f7745ddef61610d4a6488c42f06f0a8039c01710001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e044a000179bef732bcc42581ed21a0673d739a0096c5b29c13e4170d59185ba1bf5a20650000000000002a49ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff2e000400000002022102fabb9caf70565dd69dabab7e38cd8932843de0a2e620d8c8964d375387e764bc05030401010f9f000400000000022102bfca44f6bdfd7d54ce75e775049026015f7745ddef61610d4a6488c42f06f0a8037401490001000220e16029acc4d2cf0505857265442344efb5547f2047a3fc1c4822683f7c57820e04220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff16040026abb7d3a36b396d7e73af998dd2ef8e0501379740114177ff1f93b08f17a9a8e4c767";
        storeFile(trickyRoylloCoinProof3.getBytes(), sha256(trickyRoylloCoinProof3) + PROOF_FILE_NAME_EXTENSION);

        final String unlimitedRoylloCoin1 = "544150460000000001fd05085441505000040000000002241304bbe45c93350cf2fbe6af7315106ddb79a982494f31af7d34ad10de50b5770000000104500000002033b4e14d09dca9b6a47b283628a13a56fc625d00749b89dd1b0000000000000027a7b906a22308e5c62586eaf63a0755465193da34f88f38fcd16136a40837245c4c32655f293b199a10705906cd020000000001011304bbe45c93350cf2fbe6af7315106ddb79a982494f31af7d34ad10de50b5770100000000ffffffff02e803000000000000225120e5d4f8a3b6b3087984f36182654e2deb91e2e567cf35f068e6d4362ac7958cceef9a1600000000002251207a9d28abfb419fa691b22c3967b61d8d358ed65031f92740604875e29aa0ff2801407fc9e637deacd43c5434d35a9db8f6634d049f30f9aa2f8521944b4654bad147848d20f1b96e081fa23604e3ad610c5b9b16fd553ec751e608ee79bd622dcca80000000008c20612f24121b3b09bca8dfd619a8412521cd5a0df3c3530e2f2e5aa7a4beebac8ba4ccd82f747699a0a1d1e4a99819fda33c8c9cccbc6b92e2e2ee6f7018ea3862b0574ac6910af8096a5531d803cad77a8a878972091f4a11404ecd009e75ebe40afd73ec375e791f7d7de16bee7fcb6e6e412a1fb03bd363f4a997af477ffe5caa538f8705031ec8da6da106429c44b289ef68e0cce784d0d91a47589b86ed27dbd5f81607a2e8dd37cb256c4179c5980ae45e8dff592a5dfea2ad06c9a8c4b412d0afd0164000100025e1304bbe45c93350cf2fbe6af7315106ddb79a982494f31af7d34ad10de50b5770000000114756e6c696d69746564526f796c6c6f436f696e31ef35cbdef9f461dee0ad1c4753a481e30fb7b02d6356f342e573671f8044af5e00000000000401000603fd01f30bad01ab0165000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003420140e0c383aaecabb44bee72683d825118b7ef7124a9c8be149c82b7c4c525340aceb4194a177bc1e13e0bee7df5425720f4b5f30335faed586bef129780146b7a2c0e0200001021025f121b76e25840b5fbe620ef331ac834abd964a35fff72bbae207bfe2bad9a4311210349d60c6689bbbb2ffc9b30b45b96a3d6e5fd5fd01c867344c0054f61050482410c9f00040000000002210261592c195dc3af641d2808184301edacd7596c7096358042c7873bee0ac110cf0374014900010002203eb8c5d0a5cf2a1c3ffbf1ad097e22260c783d2a2d6222a23647ff6791a6a04004220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e0004000000010221027b00a63bfb5c13093652e488eca57c924355d2f190f2a814982d193773e3d2760503040101112d0001000228756e6c696d69746564526f796c6c6f436f696e20656d697373696f6e203120627920526f796c6c6f16040026abc2175e1304bbe45c93350cf2fbe6af7315106ddb79a982494f31af7d34ad10de50b5770000000114756e6c696d69746564526f796c6c6f436f696e31ef35cbdef9f461dee0ad1c4753a481e30fb7b02d6356f342e573671f8044af5e00000000001921036c1fb8f682b877b9caa27ddb7068a242f662332ea7eb99e3c32c12170c15a0bc7bffc046fd524f88aede26e5729447892286061bf1c950a6299d0a79061bd8df";
        storeFile(unlimitedRoylloCoin1.getBytes(), sha256(unlimitedRoylloCoin1) + PROOF_FILE_NAME_EXTENSION);
        final String unlimitedRoylloCoin2 = "544150460000000001fd04c55441505000040000000002241f7b079e5bc9aa73cdb388697bab10a79064e540e7507da77c214f589854cd890000000104500000202034a4f2a5fecc95d461212ad94ecb66d0c9ee7ac5fdb43d003100000000000000cf4a3cba30f469954f2fa882aeb881ae88294608a980abddd1595d48f9daf729a77539655f293b19402f697e06cd020000000001011f7b079e5bc9aa73cdb388697bab10a79064e540e7507da77c214f589854cd890100000000ffffffff02e8030000000000002251206f479cbd41e4ffce26c55a28268877fd40b0e64c283c817b875930bed23cea1e2b8216000000000022512078523cac7967c76daecc63e1fce58e7035fa400f8e5516299443dd4b2deebe210140864ccb6887b5dd92e0592b95aa5af1e4c0c82bbb20688a44c1a42a784aab5c5d2d22dbef014b51dfab133c4ea5d24826ddbd857ab8744cf7665492aa3ad45f0f0000000008a205c0f934598d194699c7c789782caabb2442ec4bdd0cba397c9bef4763aab4e3cb925852af91b28490c3f7678303f382a8cd71ede1e12b136779836f78a14e8ddcf5d067675f07d4c4692aa81d552f47e69faa56b63a01d27bc44cb08f8a2036feb5e4fe06516959842e30fa5d75c60a6f5caf8f82ae1d694837f2f587d352471f7b592c21cdb6cf968e27038ad439167cea8d4399a5adc4a6d90797ca27fe6a78190afd0164000100025e1f7b079e5bc9aa73cdb388697bab10a79064e540e7507da77c214f589854cd890000000114756e6c696d69746564526f796c6c6f436f696e3236a5ee53396cf2d45b9f7bfb306ec706bca2e5738d9bbf4cf52e3cd2cf45a31100000000000401000603fd01f50bad01ab01650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000034201403c027fc40af5c14afedbbd9e08d61017ed36780f0b92d94ac97bb0f81fc8bf63a7c75c65bf37ee41be7a5287e1da049a8ccea15053ac2c11f0ad6a5000bc06590e020000102102ea041c360a308ee44466ca4e2b07c5692c02a8d01f0720982dcd0642366546ff11210349d60c6689bbbb2ffc9b30b45b96a3d6e5fd5fd01c867344c0054f61050482410c9f0004000000000221024b84c791ddceed288f4c832d047e67f8152ce1af352cc18930902d84bc6bf9130374014900010002203eb8c5d0a5cf2a1c3ffbf1ad097e22260c783d2a2d6222a23647ff6791a6a04004220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff022700010002220000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0d30012e0004000000010221022300be5ca01e926c7bb7f8e59dc06111bf2d13627e8e28c3a581a632a8437e2e0503040101112d0001000228756e6c696d69746564526f796c6c6f436f696e20656d697373696f6e203220627920526f796c6c6f16040026af10175e1f7b079e5bc9aa73cdb388697bab10a79064e540e7507da77c214f589854cd890000000114756e6c696d69746564526f796c6c6f436f696e3236a5ee53396cf2d45b9f7bfb306ec706bca2e5738d9bbf4cf52e3cd2cf45a3110000000000e8d13eb083538735c4bb6a9354741d6187206bdfa196ff9f0534523182753408";
        storeFile(unlimitedRoylloCoin2.getBytes(), sha256(unlimitedRoylloCoin2) + PROOF_FILE_NAME_EXTENSION);

        // Adding an existing profile images for straumat.
        storeFile(new ClassPathResource("static/straumat_profil.jpeg").getContentAsByteArray(),
                "22222222-2222-2222-2222-222222222222.jpeg");

        // Starting a web server to serve content.
        PathResourceManager resourceManager = new PathResourceManager(fileSystem.getPath("."));
        webServer = Undertow.builder()
                .addHttpListener(WEB_SERVER_PORT, WEB_SERVER_HOST)  // Set port and host.
                .setHandler(new ResourceHandler(resourceManager))   // Set the handler to serve files.
                .build();
        webServer.start();
    }

    @PreDestroy
    @SuppressWarnings("checkstyle:DesignForExtension")
    public void onDestroy() throws Exception {
        webServer.stop();
        fileSystem.close();
    }

    @Override
    @SuppressWarnings("checkstyle:DesignForExtension")
    public void storeFile(final byte[] fileContent,
                          @NonNull final String fileName) {
        try {
            logger.info("Storing file {}", fileName);
            Files.write(fileSystem.getPath(".").resolve(fileName), fileContent);
        } catch (Exception e) {
            logger.error("Error storing file {}: {}", fileName, e.getMessage());
            throw new RuntimeException(e);
        }
    }

    @Override
    @SuppressWarnings("checkstyle:DesignForExtension")
    public boolean fileExists(@NonNull final String fileName) {
        boolean fileExists = Files.exists(fileSystem.getPath(".").resolve(fileName));
        if (fileExists) {
            logger.info("File {} exists", fileName);
        } else {
            logger.info("File {} does not exist", fileName);
        }
        return fileExists;
    }

    @Override
    @SuppressWarnings("checkstyle:DesignForExtension")
    public void deleteFile(@NonNull final String fileName) {
        try {
            logger.info("Deleting file {}", fileName);
            Files.delete(fileSystem.getPath(".").resolve(fileName));
        } catch (IOException e) {
            logger.error("Error deleting file {}: {}", fileName, e.getMessage());
            throw new RuntimeException(e);
        }
    }

    /**
     * Returns the sha256 value calculated with the parameter.
     *
     * @param value value
     * @return sha256 of value
     */
    protected static String sha256(final String value) {
        try {
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            byte[] digest = md.digest(value.getBytes(StandardCharsets.UTF_8));
            return DatatypeConverter.printHexBinary(digest).toLowerCase();
        } catch (NoSuchAlgorithmException e) {
            throw new RuntimeException("SHA-256 is not available: " + e.getMessage());
        }
    }

}
